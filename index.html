<!doctype html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <title>國中英文解憂雜貨店 | 線上文法專題練習</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet" />
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-NFRRHRMC');</script>
    <!-- End Google Tag Manager -->
  </head>
  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NFRRHRMC"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div id="root"></div>
    <div id="app-fallback" style="display:flex;align-items:center;justify-content:center;min-height:100vh;font-family:sans-serif;color:#333;text-align:center;padding:20px;">
      <div>
        <p style="font-size:18px;">載入中...</p>
        <p id="app-error" style="display:none;color:red;margin-top:12px;font-size:14px;"></p>
        <p id="app-debug" style="display:none;color:#666;margin-top:8px;font-size:12px;"></p>
      </div>
    </div>
    <script>
      // Diagnostic: catch JS errors and show them visually
      window.addEventListener('error', function(e) {
        var el = document.getElementById('app-error');
        if (el) { el.style.display = 'block'; el.textContent = 'JS Error: ' + (e.message || e) + ' (' + (e.filename || '') + ':' + (e.lineno || '') + ')'; }
      });
      // Hide fallback once React mounts
      var observer = new MutationObserver(function() {
        var root = document.getElementById('root');
        if (root && root.children.length > 0) {
          var fb = document.getElementById('app-fallback');
          if (fb) fb.style.display = 'none';
          observer.disconnect();
        }
      });
      observer.observe(document.getElementById('root'), { childList: true });
      // Timeout: if React hasn't mounted after 10s, show debug info
      setTimeout(function() {
        var root = document.getElementById('root');
        if (root && root.children.length === 0) {
          var dbg = document.getElementById('app-debug');
          if (dbg) {
            dbg.style.display = 'block';
            dbg.textContent = 'React 未載入 (10s timeout). UA: ' + navigator.userAgent.substring(0, 120);
          }
        }
      }, 10000);
    </script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
